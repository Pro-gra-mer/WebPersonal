<div class="container-fluid px-5 py-3">
  <h2 class="text-center">Registro</h2>
  <form [formGroup]="registerForm" (ngSubmit)="onsubmit()">
    <div class="mb-3">
      <label for="username" class="form-label">Usuario</label>
      <input
        type="text"
        class="form-control"
        id="username"
        formControlName="username"
        placeholder="Ingrese su nombre de usuario"
      />
      <div
        *ngIf="
          registerForm.get('username')?.invalid &&
          registerForm.get('username')?.touched
        "
        class="text-danger"
      >
        El nombre de usuario debe tener entre 4 y 20 caracteres y solo puede
        contener letras, números y guiones bajos.
      </div>
    </div>

    <div class="mb-3">
      <label for="email" class="form-label">Correo Electrónico</label>
      <input
        type="email"
        class="form-control"
        id="email"
        formControlName="email"
        placeholder="Ingrese su correo electrónico"
      />
      <div
        *ngIf="
          registerForm.get('email')?.invalid &&
          registerForm.get('email')?.touched
        "
        class="text-danger"
      >
        Formato de correo electrónico inválido.
      </div>
    </div>

    <div class="mb-3">
      <label for="password" class="form-label">Contraseña</label>
      <input
        type="password"
        class="form-control"
        id="password"
        formControlName="password"
        placeholder="Ingrese su contraseña"
      />
      <div
        *ngIf="
          registerForm.get('password')?.invalid &&
          registerForm.get('password')?.touched
        "
        class="text-danger"
      >
        La contraseña debe tener al menos 8 caracteres y contener letras y
        números.
      </div>
    </div>

    <div class="mb-3">
      <label for="confirmPassword" class="form-label"
        >Confirmar Contraseña</label
      >
      <input
        type="password"
        class="form-control"
        id="confirmPassword"
        formControlName="confirmPassword"
        placeholder="Confirme su contraseña"
      />
      <div
        *ngIf="
          registerForm.hasError('mismatch') &&
          registerForm.get('confirmPassword')?.touched
        "
        class="text-danger"
      >
        Las contraseñas no coinciden.
      </div>
    </div>

    <button
      type="submit"
      class="btn btn-primary w-100"
      [disabled]="registerForm.invalid"
    >
      Registrar
    </button>
  </form>

  <!-- Mensaje dinámico de éxito -->
  <div
    *ngIf="message"
    class="alert mt-3"
    [ngClass]="{
      'alert-success': !message.includes('Error'),
      'alert-danger': message.includes('Error')
    }"
  >
    {{ message }}
  </div>

  <div class="text-center mt-3">
    <span
      >¿Ya tienes cuenta? <a routerLink="/login">Inicia Sesión aquí</a></span
    >
  </div>
</div>
